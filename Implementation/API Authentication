To handle Kalshi authentication securely, you must avoid hardcoding your API keys. Chrome extensions are client-side code, meaning anyone who downloads your extension can inspect the source and find your credentials.

The gold standard for security is using chrome.storage.session for active session tokens and a secure login flow to exchange your API Key for those tokens.

1. The Secure Architecture

Instead of storing your master API Key permanently, you will use it once to "Login" and then store the temporary session token in Session Storage (which clears automatically when the browser closes).

2. Implementation: The Login Flow (background.js)

Kalshi's API uses a request-signing process. You'll need to generate a signature using your API Key and a timestamp for every request.

JavaScript
// background.js

async function kalshiLogin(apiKey, privateKey) {
  const timestamp = Date.now().toString();
  const method = "POST";
  const path = "/trade-api/v2/login";
  
  // 1. Generate the signature (Requires an RSA library like 'jsrsasign')
  const message = timestamp + method + path; 
  const signature = generateRSASignature(message, privateKey);

  // 2. Exchange for a Session Token
  const response = await fetch(`https://api.kalshi.com${path}`, {
    method: 'POST',
    headers: {
      'KALSHI-ACCESS-KEY': apiKey,
      'KALSHI-ACCESS-SIGNATURE': signature,
      'KALSHI-ACCESS-TIMESTAMP': timestamp,
      'Content-Type': 'application/json'
    }
  });

  const data = await response.json();
  
  if (data.token) {
    // 3. Store the temporary token securely (In-Memory Only)
    await chrome.storage.session.set({ kalshiToken: data.token });
    console.log("Securely logged into Kalshi.");
  }
}
3. Handling User Input via Popup

You should provide a "Settings" page where the user can paste their API Key. To keep it safe:

Never log the API key to the console.

Use chrome.storage.local only if the user checks a "Remember Me" box (warn them this is less secure).

JavaScript
// popup.js
document.getElementById('save-keys').addEventListener('click', async () => {
  const keyID = document.getElementById('key-id').value;
  const privateKey = document.getElementById('private-key').value;

  // Send to background script to perform the login
  chrome.runtime.sendMessage({ 
    type: 'PERFORM_LOGIN', 
    keys: { keyID, privateKey } 
  });
});
4. Important Manifest Permissions

To use chrome.storage.session, you must declare the permission in your manifest.json. Note that session storage is not accessible by content scripts by defaultâ€”this is a security feature to prevent FanDuel or other sites from stealing your Kalshi token.
or use chrome.storage.local 

JSON
{
  "permissions": ["storage"],
  "host_permissions": ["https://api.kalshi.com/*"]


  "host_permissions": ["https://api.kalshi.com"]
}